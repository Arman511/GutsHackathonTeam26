import { useRef } from "react";
import { gsap } from "gsap";
import { SplitText as GSAPSplitText } from "gsap/SplitText";
import { useGSAP } from "@gsap/react";

gsap.registerPlugin(GSAPSplitText);

export default function SplitText({ text, delay = 100, duration = 0.6, onLetterAnimationComplete }) {
  const el = useRef();

  useGSAP(() => {
    const split = new GSAPSplitText(el.current, { type: "chars" });
    gsap.from(split.chars, {
      opacity: 0,
      y: 50,
      stagger: delay / 1000,
      duration,
      onComplete: onLetterAnimationComplete,
    });
    return () => split.revert();
  }, []);

  return <h2 ref={el}>{text}</h2>;
}
